{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Admin/Documents/js/backend/pern-todo-again/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Admin/Documents/js/backend/pern-todo-again/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Admin/Documents/js/backend/pern-todo-again/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Fragment,useEffect,useState}from\"react\";import EditTodo from\"./EditTodo\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ListTodos=function ListTodos(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),todos=_useState2[0],setTodos=_useState2[1];//delete todo function\nvar deleteTodo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){var _deleteTodo;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:5000/todos/\".concat(id),{method:\"DELETE\"});case 3:_deleteTodo=_context.sent;setTodos(todos.filter(function(todo){return todo.todo_id!==id;}));_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0.message);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function deleteTodo(_x){return _ref.apply(this,arguments);};}();var getTodos=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,jsonData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"http://localhost:5000/todos\");case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:jsonData=_context2.sent;setTodos(jsonData);_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0.message);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function getTodos(){return _ref2.apply(this,arguments);};}();useEffect(function(){getTodos();},[]);console.log(todos);return/*#__PURE__*/_jsxs(Fragment,{children:[\" \",/*#__PURE__*/_jsxs(\"table\",{class:\"table mt-5 text-center\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:todos.map(function(todo){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:todo.description}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(EditTodo,{todo:todo})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return deleteTodo(todo.todo_id);},children:\"Delete\"})})]},todo.todo_id);})})]})]});};export default ListTodos;","map":{"version":3,"names":["React","Fragment","useEffect","useState","EditTodo","ListTodos","todos","setTodos","deleteTodo","id","fetch","method","filter","todo","todo_id","console","error","message","getTodos","response","json","jsonData","log","map","description"],"sources":["C:/Users/Admin/Documents/js/backend/pern-todo-again/client/src/components/ListTodos.js"],"sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\r\n\r\nimport EditTodo from \"./EditTodo\";\r\n\r\nconst ListTodos = () => {\r\n  const [todos, setTodos] = useState([]);\r\n\r\n  //delete todo function\r\n\r\n  const deleteTodo = async (id) => {\r\n    try {\r\n      const deleteTodo = await fetch(`http://localhost:5000/todos/${id}`, {\r\n        method: \"DELETE\",\r\n      });\r\n\r\n      setTodos(todos.filter((todo) => todo.todo_id !== id));\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  const getTodos = async () => {\r\n    try {\r\n      const response = await fetch(\"http://localhost:5000/todos\");\r\n      const jsonData = await response.json();\r\n\r\n      setTodos(jsonData);\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getTodos();\r\n  }, []);\r\n\r\n  console.log(todos);\r\n\r\n  return (\r\n    <Fragment>\r\n      {\" \"}\r\n      <table class=\"table mt-5 text-center\">\r\n        <thead>\r\n          <tr>\r\n            <th>Description</th>\r\n            <th>Edit</th>\r\n            <th>Delete</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {/*<tr>\r\n            <td>John</td>\r\n            <td>Doe</td>\r\n            <td>john@example.com</td>\r\n          </tr> */}\r\n          {todos.map((todo) => (\r\n            <tr key={todo.todo_id}>\r\n              <td>{todo.description}</td>\r\n              <td>\r\n                <EditTodo todo={todo} />\r\n              </td>\r\n              <td>\r\n                <button\r\n                  className=\"btn btn-danger\"\r\n                  onClick={() => deleteTodo(todo.todo_id)}\r\n                >\r\n                  Delete\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default ListTodos;\r\n"],"mappings":"gcAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,QAArC,KAAqD,OAArD,CAEA,MAAOC,SAAP,KAAqB,YAArB,C,wFAEA,GAAMC,UAAS,CAAG,QAAZA,UAAY,EAAM,CACtB,cAA0BF,QAAQ,CAAC,EAAD,CAAlC,wCAAOG,KAAP,eAAcC,QAAd,eAEA;AAEA,GAAMC,WAAU,4FAAG,iBAAOC,EAAP,0KAEUC,MAAK,uCAAgCD,EAAhC,EAAsC,CAClEE,MAAM,CAAE,QAD0D,CAAtC,CAFf,QAETH,WAFS,eAMfD,QAAQ,CAACD,KAAK,CAACM,MAAN,CAAa,SAACC,IAAD,QAAUA,KAAI,CAACC,OAAL,GAAiBL,EAA3B,EAAb,CAAD,CAAR,CANe,+EAQfM,OAAO,CAACC,KAAR,CAAc,YAAIC,OAAlB,EARe,oEAAH,kBAAVT,WAAU,4CAAhB,CAYA,GAAMU,SAAQ,6FAAG,wMAEUR,MAAK,CAAC,6BAAD,CAFf,QAEPS,QAFO,uCAGUA,SAAQ,CAACC,IAAT,EAHV,QAGPC,QAHO,gBAKbd,QAAQ,CAACc,QAAD,CAAR,CALa,qFAObN,OAAO,CAACC,KAAR,CAAc,aAAIC,OAAlB,EAPa,uEAAH,kBAARC,SAAQ,2CAAd,CAWAhB,SAAS,CAAC,UAAM,CACdgB,QAAQ,GACT,CAFQ,CAEN,EAFM,CAAT,CAIAH,OAAO,CAACO,GAAR,CAAYhB,KAAZ,EAEA,mBACE,MAAC,QAAD,YACG,GADH,cAEE,eAAO,KAAK,CAAC,wBAAb,wBACE,oCACE,mCACE,mCADF,cAEE,4BAFF,cAGE,8BAHF,GADF,EADF,cAQE,uBAMGA,KAAK,CAACiB,GAAN,CAAU,SAACV,IAAD,qBACT,mCACE,oBAAKA,IAAI,CAACW,WAAV,EADF,cAEE,iCACE,KAAC,QAAD,EAAU,IAAI,CAAEX,IAAhB,EADF,EAFF,cAKE,iCACE,eACE,SAAS,CAAC,gBADZ,CAEE,OAAO,CAAE,yBAAML,WAAU,CAACK,IAAI,CAACC,OAAN,CAAhB,EAFX,oBADF,EALF,GAASD,IAAI,CAACC,OAAd,CADS,EAAV,CANH,EARF,GAFF,GADF,CAqCD,CAvED,CAyEA,cAAeT,UAAf"},"metadata":{},"sourceType":"module"}